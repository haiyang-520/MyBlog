document.addEventListener("DOMContentLoaded",(function(){function e(e){function t(e){return Array.from(e).reduce((function(e,t){return e+t.offsetWidth}),0)}var n;e&&(e=t(document.querySelector("#blog-info > a").children),n=t(document.getElementById("menus").children),d=e+n,r=document.getElementById("nav")),e=window.innerWidth<=768||d>r.offsetWidth-120,r.classList.toggle("hide-menu",e)}async function t(e,t){var n=1<arguments.length&&void 0!==t&&t;"function"!=typeof InfiniteGrid&&await getScript(""+GLOBAL_CONFIG.infinitegrid.js),(async()=>{var t=!0,o=!1,i=void 0;try{for(var a,c=e[Symbol.iterator]();!(t=(a=c.next()).done);t=!0){var s,d,r,l,u,m=a.value;btf.isHidden(m)||(n&&m.classList.contains("loaded")&&(m.querySelector(".gallery-items").innerHTML="",s=m.querySelector(":scope > button"),d=m.querySelector(":scope > .loading-container"),s&&s.remove(),d)&&d.remove(),r="true"===m.getAttribute("data-button"),l=m.firstElementChild.textContent,m.classList.add("loaded"),u="url"===m.getAttribute("data-type")?await(await fetch(l)).json():JSON.parse(l),function(e,t,n,o){function i(e){return e.replace(/"/g,"&quot;")}function a(e,n){d.append((n=>{for(var o=[],a=(e-1)*n,c=0;c<n;++c){var d=a+c;if(s<=d)break;var r=(d=t[d]).alt?'alt="'+i(d.alt)+'"':"",l=d.title?'title="'+i(d.title)+'"':"";o.push('<div class="item ">\n            <img src="'+d.url+'" data-grid-maintained-target="true" '+r+l+" />\n          </div>")}return o})(n),e)}var c=2<arguments.length&&void 0!==n&&n,s=(n=o,t.length),d=new InfiniteGrid.JustifiedInfiniteGrid(e,{gap:5,isConstantSize:!0,sizeRange:[150,600],useResizeObserver:!0,observeChildren:!0,useTransform:!0}),r=(n&&btf.addGlobalFn("igOfTabs",(function(){d.destroy()}),!1,n),GLOBAL_CONFIG.infinitegrid.buttonText),l=Math.ceil(s/10),u=btf.debounce((function(e){a(e=(+e.groupKey||0)+1,10),e===l&&d.off("requestAppend",u)}),300);btf.setLoading.add(e),d.on("renderComplete",(function t(n){var o;n.updated.length&&n.mounted.length&&!n.isResize&&(btf.loadLightbox(e.querySelectorAll("img:not(.medium-zoom-image)")),d.getGroups().length===l?(btf.setLoading.remove(e),d.off("renderComplete",t)):c&&(btf.setLoading.remove(e),o=e,(n=document.createElement("button")).textContent=r,n.addEventListener("click",(function e(t){t.target.removeEventListener("click",e),t.target.remove(),btf.setLoading.add(o),a(d.getGroups().length+1,10)})),o.insertAdjacentElement("afterend",n)))})),c?a(1,10):(d.on("requestAppend",u),d.renderItems()),btf.addGlobalFn("justifiedGallery",(function(){d.destroy()}))}(m.lastElementChild,u,r,n))}}catch(t){o=!0,i=t}finally{try{!t&&c.return&&c.return()}finally{if(o)throw i}}})()}function n(e){var t=(window.globalFn||{}).themeChange||{};t&&Object.keys(t).forEach((function(n){var o=t[n];["disqus","disqusjs"].includes(n)?setTimeout((function(){return o(e)}),300):o(e)}))}function o(e){e.forEach((function(e){var t=e.getAttribute("datetime");e.textContent=btf.diffDate(t,!0),e.style.display="inline"}))}function i(){var e=document.body;e.style.overflow="",e.style.paddingRight="",btf.animateOut(document.getElementById("menu-mask"),"to_hide 0.5s"),document.getElementById("sidebar-menus").classList.remove("open"),l=!1}var a,c,s,d=void 0,r=void 0,l=!1,u={readmode:function(){var e=document.body,t=(e.classList.add("read-mode"),document.createElement("button"));t.type="button",t.className="fas fa-sign-out-alt exit-readmode",e.appendChild(t),t.addEventListener("click",(function n(){e.classList.remove("read-mode"),t.remove(),t.removeEventListener("click",n)}))},darkmode:function(){var e="dark"===document.documentElement.getAttribute("data-theme")?"light":"dark";"dark"==e?(activateDarkMode(),void 0!==GLOBAL_CONFIG.Snackbar&&btf.snackbarShow(GLOBAL_CONFIG.Snackbar.day_to_night)):(activateLightMode(),void 0!==GLOBAL_CONFIG.Snackbar&&btf.snackbarShow(GLOBAL_CONFIG.Snackbar.night_to_day)),saveToLocal.set("theme",e,2),n(e)},"rightside-config":function(e){var t=e.firstElementChild;t.classList.contains("show")&&(t.classList.add("status"),setTimeout((function(){t.classList.remove("status")}),300)),t.classList.toggle("show")},"go-up":function(){btf.scrollToDest(0,500)},"hide-aside-btn":function(){var e=document.documentElement.classList,t=e.contains("hide-aside")?"show":"hide";saveToLocal.set("aside-status",t,2),e.toggle("hide-aside")},"mobile-toc-button":function(e){var t=document.getElementById("card-toc");t.style.transition="transform 0.3s ease-in-out",t.classList.toggle("open"),t.addEventListener("transitionend",(function(){t.style.transition=""}),{once:!0})},"chat-btn":function(){window.chatBtnFn()},translateLink:function(){window.translateFn.translatePage()}};document.getElementById("rightside").addEventListener("click",(function(e){(e=e.target.closest("[id]"))&&u[e.id]&&u[e.id](this)})),window.refreshFn=function(){var n,i,a,c,s,d,u,m,f,g,h,v,L,p,b,y,E,w;e(!0),r.classList.add("show"),GLOBAL_CONFIG_SITE.isPost?(void 0!==GLOBAL_CONFIG.noticeOutdate&&(G=(K=GLOBAL_CONFIG.noticeOutdate).limitDay,J=K.messagePrev,O=K.messageNext,K=K.position,G<=(C=btf.diffDate(GLOBAL_CONFIG_SITE.postUpdate)))&&((G=document.createElement("div")).className="post-outdate-notice",G.textContent=J+" "+C+" "+O,J=document.getElementById("article-container"),"top"===K?J.insertBefore(G,J.firstChild):J.appendChild(G)),GLOBAL_CONFIG.relativeDate.post&&o(document.querySelectorAll("#post-meta time"))):(GLOBAL_CONFIG.relativeDate.homepage&&o(document.querySelectorAll("#recent-posts time")),GLOBAL_CONFIG.runtime&&(C=document.getElementById("runtimeshow"))&&(O=C.getAttribute("data-publishDate"),C.textContent=btf.diffDate(O)+" "+GLOBAL_CONFIG.runtime),(K=document.getElementById("last-push-date"))&&(J=K.getAttribute("data-lastPushDate"),K.textContent=btf.diffDate(J,!0)),(G=document.querySelector("#aside-cat-list.expandBtn"))&&btf.addEventListenerPjax(G,"click",(function(e){var t=e.target;"I"===t.nodeName&&(e.preventDefault(),t.parentNode.classList.toggle("expand"))}),!0)),y=GLOBAL_CONFIG_SITE.isToc,E=GLOBAL_CONFIG.isAnchor,(w=document.getElementById("article-container"))&&(y||E)&&(L=v=m=g=h=void 0,y&&(f=document.getElementById("card-toc"),h=(g=f.querySelector(".toc-content")).querySelectorAll(".toc-link"),v=f.querySelector(".toc-percentage"),L=g.classList.contains("is-expand"),btf.addEventListenerPjax(g,"click",(function(e){var t=e.target.closest(".toc-link");t&&(e.preventDefault(),btf.scrollToDest(btf.getEleTop(document.getElementById(decodeURI(t.getAttribute("href")).replace("#",""))),300),window.innerWidth<900)&&f.classList.remove("open")})),m=function(e){e=e.getBoundingClientRect().top;var t=g.scrollTop;e>document.documentElement.clientHeight-100&&(g.scrollTop=t+150),e<100&&(g.scrollTop=t-150)}),p=w.querySelectorAll("h1,h2,h3,h4,h5,h6"),b="",C=btf.throttle((function(){var e=window.scrollY||document.documentElement.scrollTop,t=(y&&GLOBAL_CONFIG.percent.toc&&(v.textContent=btf.getScrollPercent(e,w)),e);if(0!==t){var n="",o="";if(p.forEach((function(e,i){t>btf.getEleTop(e)-80&&(e=e.id,n=e?"#"+encodeURI(e):"",o=i)})),b!==o&&(E&&btf.updateAnchor(n),b=o,y)&&(g.querySelectorAll(".active").forEach((function(e){e.classList.remove("active")})),""!==n)){var i=h[o];if(i.classList.add("active"),setTimeout((function(){m(i)}),0),!L)for(var a=i.parentNode;!a.matches(".toc");a=a.parentNode)a.matches("li")&&a.classList.add("active")}}}),100),btf.addEventListenerPjax(window,"scroll",C,{passive:!0})),GLOBAL_CONFIG_SITE.isHome&&(H=document.getElementById("scroll-down"))&&btf.addEventListenerPjax(H,"click",(function(){btf.scrollToDest(document.getElementById("content-inner").offsetTop,300)})),(H=GLOBAL_CONFIG.highlight)&&(R=H.highlightCopy,A=H.highlightLang,I=H.highlightHeightLimit,H=H.plugin,Q=GLOBAL_CONFIG_SITE.isHighlightShrink,B=R||A||void 0!==Q,M="highlight.js"===H?document.querySelectorAll("figure.highlight"):document.querySelectorAll('pre[class*="language-"]'),B||I)&&M.length&&(k=!0===Q?"closed":"",N=void 0!==Q?'<i class="fas fa-angle-down expand"></i>':"",_=R?'<div class="copy-notice"></div><i class="fas fa-paste copy-button"></i>':"",x=function(e,t){var n;void 0!==GLOBAL_CONFIG.Snackbar?btf.snackbarShow(t):((n=e.previousElementSibling).textContent=t,n.style.opacity=1,setTimeout((function(){n.style.opacity=0}),800))},F=function(e){document.queryCommandSupported&&document.queryCommandSupported("copy")?(document.execCommand("copy"),x(e,GLOBAL_CONFIG.copy.success)):x(e,GLOBAL_CONFIG.copy.noSupport)},q=function(e){var t=e.parentNode,n=(t.classList.add("copy-true"),window.getSelection()),o=document.createRange();o.selectNodeContents(t.querySelectorAll(S?"pre code":"table .code pre")[0]),n.removeAllRanges(),n.addRange(o),F(e.lastChild),n.removeAllRanges(),t.classList.remove("copy-true")},T=function(e){e.classList.toggle("closed")},D=function(e){(e=e.target.classList).contains("expand")?T(this):e.contains("copy-button")&&q(this)},j=function(){this.classList.toggle("expand-done")},P=function(e,t,n){var o,i=document.createDocumentFragment();B&&((o=document.createElement("div")).className="highlight-tools "+k,o.innerHTML=N+e+_,btf.addEventListenerPjax(o,"click",D),i.appendChild(o)),I&&t.offsetHeight>I+30&&((e=document.createElement("div")).className="code-expand-btn",e.innerHTML='<i class="fas fa-angle-double-down"></i>',btf.addEventListenerPjax(e,"click",j),i.appendChild(e)),"hl"===n?t.insertBefore(i,t.firstChild):t.parentNode.insertBefore(i,t)},(S="prismjs"===H)?M.forEach((function(e){var t;A?(t='<div class="code-lang">'+(e.getAttribute("data-language")||"Code")+"</div>",btf.wrap(e,"figure",{class:"highlight"}),P(t,e)):(btf.wrap(e,"figure",{class:"highlight"}),P("",e))})):M.forEach((function(e){var t;A?(t='<div class="code-lang">'+("plain"!==(t=e.getAttribute("class").split(" ")[1])&&void 0!==t?t:"Code")+"</div>",P(t,e,"hl")):P("",e,"hl")}))),GLOBAL_CONFIG.isPhotoFigcaption&&document.querySelectorAll("#article-container img").forEach((function(e){var t,n=e.title||e.alt;n&&((t=document.createElement("div")).className="img-alt is-center",t.textContent=n,e.insertAdjacentElement("afterend",t))})),i=document.getElementById("rightside"),a=window.innerHeight+56,c=0,s=document.getElementById("page-header"),d="undefined"!=typeof chatBtn,u=GLOBAL_CONFIG.percent.rightside,document.body.scrollHeight<=a?i.classList.add("rightside-show"):(n="",O=btf.throttle((function(){var e=window.scrollY||document.documentElement.scrollTop,t=c<e;56<(c=e)?(""===n&&(s.classList.add("nav-fixed"),i.classList.add("rightside-show")),t?"down"!==n&&(s.classList.remove("nav-visible"),d&&window.chatBtn.hide(),n="down"):"up"!==n&&(s.classList.add("nav-visible"),d&&window.chatBtn.show(),n="up")):(n="",0===e&&s.classList.remove("nav-fixed","nav-visible"),i.classList.remove("rightside-show")),u&&(t=e,t=btf.getScrollPercent(t,document.body),e=document.getElementById("go-up"),t<95?(e.classList.add("show-percent"),e.querySelector(".scroll-percent").textContent=t):e.classList.remove("show-percent")),document.body.scrollHeight<=a&&i.classList.add("rightside-show")}),300),btf.addEventListenerPjax(window,"scroll",O,{passive:!0})),btf.removeGlobalFnEvent("justifiedGallery");var G,O,C,A,I,B,S,k,N,_,x,F,q,T,D,j,P,H,R,z,M,W,U,J,Y,K,Q=document.querySelectorAll("#article-container .gallery-container");Q.length&&t(Q),btf.loadLightbox(document.querySelectorAll("#article-container img:not(.no-lightbox)")),(R=document.querySelectorAll("#article-container table")).length&&R.forEach((function(e){e.closest(".highlight")||btf.wrap(e,"div",{class:"table-wrap"})})),(M=document.querySelectorAll("#article-container .hide-button")).length&&(z=function(e){this.classList.add("open");var n=this.nextElementSibling.querySelectorAll(".gallery-container");n.length&&t(n)},M.forEach((function(e){e.addEventListener("click",z,{once:!0})}))),(K=document.querySelectorAll("#article-container .tabs")).length&&(Y=function(e,t){Array.from(e).forEach((function(e){e.classList.remove("active"),e!==t&&e.id!==t||e.classList.add("active")}))},K.forEach((function(e){var n,o=!!e.querySelectorAll(".gallery-container");btf.addEventListenerPjax(e.firstElementChild,"click",(function(e){var n;(e=e.target.closest("button")).classList.contains("active")||(Y(this.children,e),this.classList.remove("no-default"),e=e.getAttribute("data-href"),n=this.nextElementSibling,Y(n.children,e),o&&(btf.removeGlobalFnEvent("igOfTabs",this),(n=n.querySelectorAll(":scope > #"+e+" .gallery-container")).length)&&t(n,this))})),n=e,btf.addEventListenerPjax(n.lastElementChild,"click",(function(e){e.target.closest("button")&&btf.scrollToDest(btf.getEleTop(n),300)}))}))),(J=document.getElementById("switch-btn"))&&(W=!1,U=document.getElementById("post-comment"),btf.addEventListenerPjax(J,"click",(function(){U.classList.toggle("move"),W||"function"!=typeof loadOtherComment||(W=!0,loadOtherComment())}))),btf.addEventListenerPjax(document.getElementById("toggle-menu"),"click",(function(){btf.sidebarPaddingR(),document.body.style.overflow="hidden",btf.animateIn(document.getElementById("menu-mask"),"to_show 0.5s"),document.getElementById("sidebar-menus").classList.add("open"),l=!0}))},refreshFn(),window.addEventListener("resize",(function(){e(!1),l&&btf.isHidden(document.getElementById("toggle-menu"))&&i()})),document.getElementById("menu-mask").addEventListener("click",(function(e){i()})),document.querySelector("#sidebar-menus .menus_items").addEventListener("click",(function(e){(e=e.target.closest(".site-page.group"))&&e.classList.toggle("hide")})),GLOBAL_CONFIG.islazyload&&(window.lazyLoadInstance=new LazyLoad({elements_selector:"img",threshold:0,data_src:"lazy-src"})),void 0!==GLOBAL_CONFIG.copyright&&(a=GLOBAL_CONFIG.copyright,c=a.limitCount,s=a.languages,document.body.addEventListener("copy",(function(e){e.preventDefault();var t=window.getSelection(0).toString(),n=t;return t.length>c&&(n=t+"\n\n\n"+s.author+"\n"+s.link+window.location.href+"\n"+s.source+"\n"+s.info),(e.clipboardData?e:window).clipboardData.setData("text",n)}))),GLOBAL_CONFIG.autoDarkmode&&window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change",(function(e){void 0===saveToLocal.get("theme")&&(e.matches?n("dark"):n("light"))}))}));